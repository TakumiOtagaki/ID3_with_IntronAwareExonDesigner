# 指示など
まずここは ID3 という repo を fork して intron awared exon design みたいなことをしてます。（詳細は demo とか repo をみてください）

お願いや悩み
 * adhoc な coding をやりまくったせいで、元々のID3 repo との差分の部分がかなり煩雑になっていて、refactoring をしたいと考えています。
 * そもそも intron_designer ではないんですよね、intron は固定して exon を可変にするからね。以下の 研究 background などを鑑みて良い名前を考えてみて。
この辺をどうにかしたいと思っています。
要件定義や refactoring plan を考えてみてくれないか？





## ID3: Intron Designer based on Destabilizing Duplexes
Repo の概要など

### 🚀 概要 (Overview)

`ID3_intron_designer` は、スプライシング効率を最大化するために、イントロン周辺のRNA二次構造を最適化する（合理的に設計する）ためのPythonフレームワークです。

特に、mRNA医薬や遺伝子治療ベクターの開発において、**イントロン配列は固定**し、タンパク質の**アミノ酸配列を変えずにエクソン領域の塩基配列（コドン）を最適化する**、という実用的なシナリオに特化しています。

### 🧬 背景 (Background)

RNAスプライシングは、pre-mRNAからイントロンが除去され、エクソンが連結される生命の基本プロセスです。この効率は、スプライソソームと呼ばれる複合体が、イントロンの5'末端、3'末端、ブランチポイントといった重要な配列モチーフを正確に認識することに依存しています。

近年、これらの重要な領域がRNAの二次構造（ステムループなど）に埋もれてしまうと、スプライソソームの構成因子（snRNPなど）が物理的にアクセスできなくなり、スプライシング効率が著しく低下することが示されています (e.g., *PLOS Biology, 2019; bioRxiv, 2023*)。

### ⚠️ 課題 (The Problem)

効率的なスプライシングは、遺伝子発現（タンパク質合成量）の律速段階の一つです。特に合成RNA（mRNA医薬など）の設計において、意図せず安定な二次構造を形成してしまう配列（特にイントロンとエクソンの境界周辺）は、生産効率の低下や、異常なスプライシング（クリプティック・スプライシング）の原因となります。

### 💡 解決策 (Our Solution: ID3)

`ID3_intron_designer` は、この問題を「合理的設計 (Rational Design)」によって解決します。AIによるブラックボックス的な予測とは異なり、明確な物理的・生物学的仮説（ルール）に基づいて最適な配列を探索します。

本ツールは、固定されたイントロン配列に対し、**エクソン領域のコドンを同義置換（Synonymous substitution）**することで、以下の2つのルールを満たす配列を設計します。

1.  **ルール1: 全体の構造を不安定化する (Destabilize overall structure)**
    * スプライシング効率は、RNAが構造を組まない（開いている）ほど高いと予想されます。
    * そこで、イントロン配列全体と、その**上流エクソン（例: 60塩基）**および**下流エクソン（例: 30塩基）**を含む領域の**アンサンブル自由エネルギー (Ensemble Free Energy, EFE) を最大化**（＝最も不安定）するコドンを選択します。

2.  **ルール2: スプライス部位のアクセス性を確保する (Protect splice sites)**
    * スプライシング反応の開始点・終了点であるイントロンの5'末端と3'末端は、絶対に隠れてはなりません。
    * **イントロンの5'末端（例: 3塩基）**と **3'末端（例: 3塩基）**が、配列全体を見た時に**塩基対を形成しない (unpaired)** という厳格な制約（ハードコンストレイント）を課します。

この最適化により、`ID3_intron_designer` は、アミノ酸配列を変えることなく、スプライソソームがアクセスしやすい「開いた」RNA構造を持つ配列を設計し、スプライシング効率の最大化を目指します。

